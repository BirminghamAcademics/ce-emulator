<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Chronos Converter</title>
<style>
body{background:#000;color:#0f0;font-family:monospace}
</style>
</head>
<body>

<h2>Chronos ROM â†’ AppVar</h2>
<input type="file" id="rom">
<button onclick="convert()">Convert</button>

<script>
function detectCore(d){
  if(d[0]==0x4E&&d[1]==0x45&&d[2]==0x53)return 0x08; // NES
  if(d[0x104]==0xCE&&d[0x105]==0xED)return 0x01; // GB
  return 0x03; // SMS/GG
}

function convert(){
  const f=document.getElementById("rom").files[0];
  const r=new FileReader();
  r.onload=()=>{
    const rom=new Uint8Array(r.result);
    const core=detectCore(rom);

    const header=new Uint8Array(64);
    header.set(new TextEncoder().encode("CHRONOS\0"));
    header[8]=core;
    header[9]=rom.length&255;
    header[10]=rom.length>>8;

    const data=new Uint8Array(header.length+rom.length);
    data.set(header);
    data.set(rom,64);

    const blob=new Blob([data]);
    const a=document.createElement("a");
    a.href=URL.createObjectURL(blob);
    a.download="GAME.8xv";
    a.click();
  };
  r.readAsArrayBuffer(f);
}
</script>
</body>
</html>
